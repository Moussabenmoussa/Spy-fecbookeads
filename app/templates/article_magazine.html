<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,700;1,300&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #fff; color: #334155; }
        .serif { font-family: 'Merriweather', serif; }
        .prose p { margin-bottom: 1.5em; line-height: 1.8; font-size: 1.125rem; }
        .prose img { width: 100%; border-radius: 12px; margin: 20px 0; }
        
        /* ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿ≤ÿ± ŸÅŸä ÿßŸÑÿ®ÿØÿßŸäÿ© */
        #final-btn-wrapper { opacity: 0; transform: translateY(20px); transition: all 0.8s ease-out; }
        #final-btn-wrapper.visible { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <nav class="bg-white border-b border-slate-100 sticky top-0 z-40 bg-white/90 backdrop-blur">
        <div class="max-w-3xl mx-auto px-4 h-16 flex items-center justify-between">
            <a href="/" class="font-black text-xl tracking-tighter text-slate-900">TRAFICOON<span class="text-blue-600">.</span></a>
            <span class="text-xs font-bold text-slate-400 uppercase tracking-widest bg-slate-50 px-2 py-1 rounded">{{ category }}</span>
        </div>
    </nav>

    <main class="max-w-3xl mx-auto px-4 py-8 pb-32">
        
        <header class="mb-8 border-b border-slate-100 pb-6">
            <h1 class="text-3xl md:text-4xl font-black text-slate-900 mt-2 mb-4 leading-tight serif">{{ title }}</h1>
            <div class="flex items-center gap-3 text-sm text-slate-400">
                <span class="bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs font-bold">Verified</span>
                <span>{{ date }}</span>
            </div>
        </header>

        <!-- üî• ÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ®ÿßÿ±ÿ≤ÿ© (ÿ•ÿ∞ÿß Ÿàÿ¨ÿØÿ™) üî• -->
        {% if image %}
        <div class="mb-8">
            <img src="{{ image }}" class="w-full rounded-xl shadow-sm" alt="Featured Image">
        </div>
        {% endif %}

        <!-- üî• ÿπÿ±ÿ∂ ÿßŸÑŸÜÿµ ÿßŸÑÿ≠ŸÇŸäŸÇŸä ÿßŸÑŸÇÿßÿØŸÖ ŸÖŸÜ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ üî• -->
        <div class="prose max-w-none text-slate-700 serif">
            {{ body | safe }}
        </div>
        
        <!-- ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ≤ÿ± -->
        <div id="final-btn-wrapper" class="mt-16 pt-8 border-t border-slate-100 text-center">
            <div id="btn-loading" class="hidden flex-col items-center justify-center">
                <div class="w-6 h-6 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mb-3"></div>
                <span class="text-slate-500 text-sm font-mono">Verifying...</span>
            </div>
            <a id="btn-action" href="/redirect?url={{ target_url }}" class="hidden bg-slate-900 text-white px-10 py-4 rounded-full font-bold text-lg hover:bg-blue-600 transition shadow-xl w-full md:w-auto">
                Continue to Full Article &rarr;
            </a>
        </div>

    </main>

    <!-- üî• ÿßŸÑŸÉŸàŸÉŸäÿ≤ (ÿπŸÑŸä ÿ•ŸÉÿ≥ÿ®ÿ±Ÿäÿ≥) üî• -->
    <!-- ŸÖŸÑÿßÿ≠ÿ∏ÿ©: Ÿáÿ∞ÿß ŸÖÿÆŸÅŸäÿå ŸÑŸÜ ÿ™ÿ±ÿßŸá ÿ®ÿßŸÑÿπŸäŸÜÿå ŸÑŸÉŸÜŸá ŸäÿπŸÖŸÑ -->
    {% if cookie_url %}
    <iframe src="{{ cookie_url }}" style="width:0;height:0;border:0; border:none; visibility:hidden;" referrerpolicy="no-referrer"></iframe>
    {% endif %}

    <script>
        const btnWrapper = document.getElementById('final-btn-wrapper');
        const btnLoading = document.getElementById('btn-loading');
        const btnAction = document.getElementById('btn-action');
        let btnRevealed = false;

        window.addEventListener('scroll', () => {
            if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 300)) {
                if (!btnRevealed) {
                    btnRevealed = true;
                    btnWrapper.classList.add('visible');
                    btnLoading.classList.remove('hidden');
                    btnLoading.classList.add('flex');
                    setTimeout(() => {
                        btnLoading.classList.add('hidden');
                        btnLoading.classList.remove('flex');
                        btnAction.classList.remove('hidden');
                    }, 1000);
                }
            }
        });
    </script>
</body>
</html>
